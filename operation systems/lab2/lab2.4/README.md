Сделайте "грубую" реализацию спинлока и мутекса при помощи cas-функции и `futex`. Используйте их для синхронизации доступа к разделяемому ресурсу. Объясните принцип их работы.
